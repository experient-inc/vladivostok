var Tree = (function () {
    function Tree(root) {
        this._root = root;
    }
    Object.defineProperty(Tree.prototype, "root", {
        get: function () { return this._root.value; },
        enumerable: true,
        configurable: true
    });
    Tree.prototype.parent = function (t) {
        var p = this.pathFromRoot(t);
        return p.length > 1 ? p[p.length - 2] : null;
    };
    Tree.prototype.children = function (t) {
        var n = findNode(t, this._root);
        return n ? n.children.map(function (t) { return t.value; }) : [];
    };
    Tree.prototype.firstChild = function (t) {
        var n = findNode(t, this._root);
        return n && n.children.length > 0 ? n.children[0].value : null;
    };
    Tree.prototype.siblings = function (t) {
        var p = findPath(t, this._root, []);
        if (p.length < 2)
            return [];
        var c = p[p.length - 2].children.map(function (c) { return c.value; });
        return c.filter(function (cc) { return cc !== t; });
    };
    Tree.prototype.pathFromRoot = function (t) { return findPath(t, this._root, []).map(function (s) { return s.value; }); };
    Tree.prototype.contains = function (tree) { return contains(this._root, tree._root); };
    return Tree;
})();
exports.Tree = Tree;
function findNode(expected, c) {
    if (expected === c.value)
        return c;
    for (var _i = 0, _a = c.children; _i < _a.length; _i++) {
        var cc = _a[_i];
        var r = findNode(expected, cc);
        if (r)
            return r;
    }
    return null;
}
function findPath(expected, c, collected) {
    collected.push(c);
    if (expected === c.value)
        return collected;
    for (var _i = 0, _a = c.children; _i < _a.length; _i++) {
        var cc = _a[_i];
        var cloned = collected.slice(0);
        var r = findPath(expected, cc, cloned);
        if (r)
            return r;
    }
    return [];
}
function contains(tree, subtree) {
    if (tree.value !== subtree.value)
        return false;
    for (var _i = 0, _a = subtree.children; _i < _a.length; _i++) {
        var subtreeNode = _a[_i];
        var s = tree.children.filter(function (child) { return child.value === subtreeNode.value; });
        if (s.length === 0)
            return false;
        if (!contains(s[0], subtreeNode))
            return false;
    }
    return true;
}
var TreeNode = (function () {
    function TreeNode(value, children) {
        this.value = value;
        this.children = children;
    }
    TreeNode.prototype.toString = function () { return "TreeNode(" + this.value + ")"; };
    return TreeNode;
})();
exports.TreeNode = TreeNode;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJlZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy91dGlscy90cmVlLnRzIl0sIm5hbWVzIjpbIlRyZWUiLCJUcmVlLmNvbnN0cnVjdG9yIiwiVHJlZS5yb290IiwiVHJlZS5wYXJlbnQiLCJUcmVlLmNoaWxkcmVuIiwiVHJlZS5maXJzdENoaWxkIiwiVHJlZS5zaWJsaW5ncyIsIlRyZWUucGF0aEZyb21Sb290IiwiVHJlZS5jb250YWlucyIsImZpbmROb2RlIiwiZmluZFBhdGgiLCJjb250YWlucyIsIlRyZWVOb2RlIiwiVHJlZU5vZGUuY29uc3RydWN0b3IiLCJUcmVlTm9kZS50b1N0cmluZyJdLCJtYXBwaW5ncyI6IkFBQUE7SUFJRUEsY0FBWUEsSUFBaUJBO1FBQUlDLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBO0lBQUNBLENBQUNBO0lBRXJERCxzQkFBSUEsc0JBQUlBO2FBQVJBLGNBQWdCRSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQTs7O09BQUFGO0lBRTFDQSxxQkFBTUEsR0FBTkEsVUFBT0EsQ0FBSUE7UUFDVEcsSUFBTUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDL0JBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBLE1BQU1BLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLE1BQU1BLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBO0lBQy9DQSxDQUFDQTtJQUVESCx1QkFBUUEsR0FBUkEsVUFBU0EsQ0FBSUE7UUFDWEksSUFBTUEsQ0FBQ0EsR0FBR0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsRUFBRUEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0E7UUFDbENBLE1BQU1BLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLFFBQVFBLENBQUNBLEdBQUdBLENBQUNBLFVBQUFBLENBQUNBLElBQUlBLE9BQUFBLENBQUNBLENBQUNBLEtBQUtBLEVBQVBBLENBQU9BLENBQUNBLEdBQUdBLEVBQUVBLENBQUNBO0lBQy9DQSxDQUFDQTtJQUVESix5QkFBVUEsR0FBVkEsVUFBV0EsQ0FBSUE7UUFDYkssSUFBTUEsQ0FBQ0EsR0FBR0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsRUFBRUEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0E7UUFDbENBLE1BQU1BLENBQUNBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLFFBQVFBLENBQUNBLE1BQU1BLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBO0lBQ2pFQSxDQUFDQTtJQUVETCx1QkFBUUEsR0FBUkEsVUFBU0EsQ0FBSUE7UUFDWE0sSUFBTUEsQ0FBQ0EsR0FBR0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsRUFBRUEsSUFBSUEsQ0FBQ0EsS0FBS0EsRUFBRUEsRUFBRUEsQ0FBQ0EsQ0FBQ0E7UUFDdENBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLE1BQU1BLEdBQUdBLENBQUNBLENBQUNBO1lBQUNBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBO1FBRTVCQSxJQUFNQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxNQUFNQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxRQUFRQSxDQUFDQSxHQUFHQSxDQUFDQSxVQUFBQSxDQUFDQSxJQUFJQSxPQUFBQSxDQUFDQSxDQUFDQSxLQUFLQSxFQUFQQSxDQUFPQSxDQUFDQSxDQUFDQTtRQUNyREEsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsVUFBQUEsRUFBRUEsSUFBSUEsT0FBQUEsRUFBRUEsS0FBS0EsQ0FBQ0EsRUFBUkEsQ0FBUUEsQ0FBQ0EsQ0FBQ0E7SUFDbENBLENBQUNBO0lBRUROLDJCQUFZQSxHQUFa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S0FBS0EsQ0FBQ0EsQ0FBQ0E7WUFBQ0EsTUFBTUEsQ0FBQ0EsS0FBS0EsQ0FBQ0E7UUFDakNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLFdBQVdBLENBQUNBLENBQUNBO1lBQUNBLE1BQU1BLENBQUNBLEtBQUtBLENBQUNBO0tBQ2hEQTtJQUVEQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQTtBQUNkQSxDQUFDQTtBQUVEO0lBQ0VDLGtCQUFtQkEsS0FBUUEsRUFBU0EsUUFBdUJBO1FBQXhDQyxVQUFLQSxHQUFMQSxLQUFLQSxDQUFHQTtRQUFTQSxhQUFRQSxHQUFSQSxRQUFRQSxDQUFlQTtJQUFHQSxDQUFDQTtJQUUvREQsMkJBQVFBLEdBQVJBLGNBQXFCRSxNQUFNQSxDQUFDQSxjQUFZQSxJQUFJQSxDQUFDQSxLQUFLQSxNQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTtJQUMxREYsZUFBQ0E7QUFBREEsQ0FBQ0EsQUFKRCxJQUlDO0FBSlksZ0JBQVEsV0FJcEIsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBUcmVlPFQ+IHtcclxuICAvKiogQGludGVybmFsICovXHJcbiAgX3Jvb3Q6IFRyZWVOb2RlPFQ+O1xyXG5cclxuICBjb25zdHJ1Y3Rvcihyb290OiBUcmVlTm9kZTxUPikgeyB0aGlzLl9yb290ID0gcm9vdDsgfVxyXG5cclxuICBnZXQgcm9vdCgpOiBUIHsgcmV0dXJuIHRoaXMuX3Jvb3QudmFsdWU7IH1cclxuXHJcbiAgcGFyZW50KHQ6IFQpOiBUIHtcclxuICAgIGNvbnN0IHAgPSB0aGlzLnBhdGhGcm9tUm9vdCh0KTtcclxuICAgIHJldHVybiBwLmxlbmd0aCA+IDEgPyBwW3AubGVuZ3RoIC0gMl0gOiBudWxsO1xyXG4gIH1cclxuXHJcbiAgY2hpbGRyZW4odDogVCk6IFRbXSB7XHJcbiAgICBjb25zdCBuID0gZmluZE5vZGUodCwgdGhpcy5fcm9vdCk7XHJcbiAgICByZXR1cm4gbiA/IG4uY2hpbGRyZW4ubWFwKHQgPT4gdC52YWx1ZSkgOiBbXTtcclxuICB9XHJcblxyXG4gIGZpcnN0Q2hpbGQodDogVCk6IFQge1xyXG4gICAgY29uc3QgbiA9IGZpbmROb2RlKHQsIHRoaXMuX3Jvb3QpO1xyXG4gICAgcmV0dXJuIG4gJiYgbi5jaGlsZHJlbi5sZW5ndGggPiAwID8gbi5jaGlsZHJlblswXS52YWx1ZSA6IG51bGw7XHJcbiAgfVxyXG5cclxuICBzaWJsaW5ncyh0OiBUKTogVFtdIHtcclxuICAgIGNvbnN0IHAgPSBmaW5kUGF0aCh0LCB0aGlzLl9yb290LCBbXSk7XHJcbiAgICBpZiAocC5sZW5ndGggPCAyKSByZXR1cm4gW107XHJcblxyXG4gICAgY29uc3QgYyA9IHBbcC5sZW5ndGggLSAyXS5jaGlsZHJlbi5tYXAoYyA9PiBjLnZhbHVlKTtcclxuICAgIHJldHVybiBjLmZpbHRlcihjYyA9PiBjYyAhPT0gdCk7XHJcbiAgfVxyXG5cclxuICBwYXRoRnJvbVJvb3QodDogVCk6IFRbXSB7IHJldHVybiBmaW5kUGF0aCh0LCB0aGlzLl9yb290LCBbXSkubWFwKHMgPT4gcy52YWx1ZSk7IH1cclxuXHJcbiAgY29udGFpbnModHJlZTogVHJlZTxUPik6IGJvb2xlYW4geyByZXR1cm4gY29udGFpbnModGhpcy5fcm9vdCwgdHJlZS5fcm9vdCk7IH1cclxufVxyXG5cclxuZnVuY3Rpb24gZmluZE5vZGU8VD4oZXhwZWN0ZWQ6IFQsIGM6IFRyZWVOb2RlPFQ+KTogVHJlZU5vZGU8VD4ge1xyXG4gIGlmIChleHBlY3RlZCA9PT0gYy52YWx1ZSkgcmV0dXJuIGM7XHJcbiAgZm9yIChsZXQgY2Mgb2YgYy5jaGlsZHJlbikge1xyXG4gICAgY29uc3QgciA9IGZpbmROb2RlKGV4cGVjdGVkLCBjYyk7XHJcbiAgICBpZiAocikgcmV0dXJuIHI7XHJcbiAgfVxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaW5kUGF0aDxUPihleHBlY3RlZDogVCwgYzogVHJlZU5vZGU8VD4sIGNvbGxlY3RlZDogVHJlZU5vZGU8VD5bXSk6IFRyZWVOb2RlPFQ+W10ge1xyXG4gIGNvbGxlY3RlZC5wdXNoKGMpO1xyXG4gIGlmIChleHBlY3RlZCA9PT0gYy52YWx1ZSkgcmV0dXJuIGNvbGxlY3RlZDtcclxuXHJcbiAgZm9yIChsZXQgY2Mgb2YgYy5jaGlsZHJlbikge1xyXG4gICAgY29uc3QgY2xvbmVkID0gY29sbGVjdGVkLnNsaWNlKDApO1xyXG4gICAgY29uc3QgciA9IGZpbmRQYXRoKGV4cGVjdGVkLCBjYywgY2xvbmVkKTtcclxuICAgIGlmIChyKSByZXR1cm4gcjtcclxuICB9XHJcblxyXG4gIHJldHVybiBbXTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29udGFpbnM8VD4odHJlZTogVHJlZU5vZGU8VD4sIHN1YnRyZWU6IFRyZWVOb2RlPFQ+KTogYm9vbGVhbiB7XHJcbiAgaWYgKHRyZWUudmFsdWUgIT09IHN1YnRyZWUudmFsdWUpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgZm9yIChsZXQgc3VidHJlZU5vZGUgb2Ygc3VidHJlZS5jaGlsZHJlbikge1xyXG4gICAgY29uc3QgcyA9IHRyZWUuY2hpbGRyZW4uZmlsdGVyKGNoaWxkID0+IGNoaWxkLnZhbHVlID09PSBzdWJ0cmVlTm9kZS52YWx1ZSk7XHJcbiAgICBpZiAocy5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZTtcclxuICAgIGlmICghY29udGFpbnMoc1swXSwgc3VidHJlZU5vZGUpKSByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRyZWVOb2RlPFQ+IHtcclxuICBjb25zdHJ1Y3RvcihwdWJsaWMgdmFsdWU6IFQsIHB1YmxpYyBjaGlsZHJlbjogVHJlZU5vZGU8VD5bXSkge31cclxuXHJcbiAgdG9TdHJpbmcoKTogc3RyaW5nIHsgcmV0dXJuIGBUcmVlTm9kZSgke3RoaXMudmFsdWV9KWA7IH1cclxufSJdfQ==